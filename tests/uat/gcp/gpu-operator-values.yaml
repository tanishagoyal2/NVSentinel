# Copyright (c) 2025, NVIDIA CORPORATION.  All rights reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# GPU Operator values for GCP/GKE
# GKE automatically manages GPU drivers for A4, L4, H100, and other GPU instances.
# 
# This file is kept for reference but the install script now skips GPU Operator for CSP=gcp
# See: https://cloud.google.com/kubernetes-engine/docs/how-to/gpus#installing_drivers

dcgm:
  enabled: true
dcgmExporter:
  enabled: true
  serviceMonitor:
    enabled: true
devicePlugin:
  enabled: true
driver:
  enabled: true
gfd:
  enabled: true
toolkit:
  enabled: true
  env:
  - name: RUNTIME_CONFIG_SOURCE
    value: file

# Fix deprecated node-role label warnings
node-feature-discovery:
  master:
    affinity:
      nodeAffinity:
        preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 1
          preference:
            matchExpressions:
            - key: "node-role.kubernetes.io/control-plane"
              operator: In
              values: [""]
